1. Open CubeMx

2. Click on file → New project  
![1](../../Media/blinkLED%201.png)

- This will take you to all the different types of STM MCUs and boards
    that you can buy. We use the STM NUCLEO-F446RE board to write
    embedded software and program the microcontrollers (VETx) on our
    custom PCBs (ACU, SCU, and VCU).

3. Type "F446RE" in the "commercial part number" section  
![2](../../Media/blinkLED%202.png)

4. Click the STM NUCLEO-F446RE board when it pops up, then click the blue
"Start Project" button  
![4](../../Media/blinkLED%204.png)

5. You will then get prompted to "Initialize all peripherals with their
default mode"

<div class="center">

![5](../../Media/blinkLED%205.png)

</div>

6. Click yes, then CubeMX will take you to the microcontroller "Pinout &
Configuration" section!

- We use the Pinout & Configuration section to write the preprocessor
    directives for our embedded C programs. Throughout the tutorials we
    will come back to this page frequently to and explain how to
    configure our microcontrollers with different communication
    protocols.

- We will leave all of the settings as default for this tutorial

7. Now we can move to the blue "Project Manager" tab  
![6](../../Media/blinkLED%206.png)

8. Under the Project name section type HAL_LEDBlink

- This will be the name of the project folder for our HAL_LEDBlink
    project

9. Under the "Project Location" section and choose the place you want the
file to be located on your computer

- Personally, I made a UMSAE folder and inside that folder I have all
    the different project folders related to our car

10. Next, click the drop down window for the "Toolchain/IDE" section and
select "STM32CubeIDE

- This will be the IDE we use to program our microcontrollers

11. Now click on the "Code Generator" tab. Under the "Generated Files"
section, enable the "Generate peripheral initialization as a pair of
’c./.h’ files per peripheral" setting. This will generate a lot of the
board level definitions in the .h file instead.

12. Now click the "Generate Code" in the top right of CubeMX

- This will configure the microcontroller for the project file based
    on the pinout configurations page and other settings

13. When prompted, click "Open Project" then click "Launch"

- Once CubeIDE opens you should see your project appear on the
    left-hand side of the screen under "Project Explorer"

<div class="center">

![7](../../Media/blinkLED%207.png)

</div>

14. Click on the project then the only folders we need to look at for these
tutorials are the "Inc" (Include) and "Src" (Source) files

<div class="center">

![8](../../Media/blinkLED%208.png)

</div>

15. Next, open both the "main.c" and "main.h" files in the Src and Inc
folders respectively

- Files ending with .c are files where we write our source code for
    the car, .h files (header files) are used to store preprocessor
    directives

16. Open "main.h" and scroll down to the code block labelled "Private
defines"

- These defines were generated by CubeMX specifically the "Pinout &
    Configuration" section generates these defines

- To get the LED to blink we need two things, the Port and Pin number
    of the microcontroller. The defines that CubeMX generated for us
    gave the port and pin values custom labels so it’s easier for us to
    read. You’ll need to use LD2_GPIO_Port and LD2_GPIO_Pin to turn the
    LED on and off.  
    ![9](../../Media/blinkLED%209.png)

17. Now open "main.c", and scroll down the the "main" function, this is
where we write the code to toggle the LED on and off

- Inside the braces of the infinite while loop and above the comment
    /\* USER CODE END WHILE \*/ we are going to use two HAL (Hardware
    Abstraction Layer) functions: HAL_GPIO_TogglePin() and HAL_Delay()

- HAL_GPIO_TogglePin takes in two parameters, the port and pin of the
    microcontroller used to turn the LED on and off. This is
    LD2_GPIO_Port and LD2_GPIO_Pin from the "main.h" file

18. On the next line, use HAL_Delay and hold left-ctrl then left click on
the function again to see it’s parameters. Go back to main.c and write
500 as the function parameter for now! This is the amount of time we
want the LED to be on and off for.

19. Save your work and it’s almost time to run the program!

20. Plug in your STM-F446RE board (if you don’t have one yet, ask the SSO to
borrow one for this tutorial)

21. Next click the drop down arrow beside the green play button at the top
of the screen then select "Run as" → "STM32 C/C++ Application"  
![10](../../Media/blinkLED%2010.png)

22. When prompted hit "ok". This is just to set up the run profile for the
project

23. Your project should now automatically build then run!

- Try changing the delay value, this will change how fast the LED
    flashes on the board!!

